@mixin modifier-condition($name, $value, $key, $attribute) {
    @if str-index($name, $key) {
        .#{$key} {
            &#{str-slice($name, str-index($name, $key) + str-length($key))} {
                #{$attribute}: $value;
            }
        }
    }
}

@mixin gutter-modifiers($gutters) {

    @each $key, $value in $gutters {
        .mt-#{$key} {
            margin-top: #{$value};
        }
        .mb-#{$key} {
            margin-bottom: #{$value};
        }
        .my-#{$key} {
            margin-top: #{$value};
            margin-bottom: #{$value};
        }
        .ml-#{$key} {
            margin-left: #{$value};
        }
        .mr-#{$key} {
            margin-right: #{$value};
        }
        .pt-#{$key} {
            padding-top: #{$value};
        }
        .pb-#{$key} {
            padding-bottom: #{$value};
        }
        .py-#{$key} {
            padding-top: #{$value};
            padding-bottom: #{$value};
        }
        .pl-#{$key} {
            padding-left: #{$value};
        }
        .pr-#{$key} {
            padding-right: #{$value};
        }
        .px-#{$key} {
            padding-left: #{$value};
            padding-right: #{$value};
        }
    }
}

@mixin map-variables($map) {

    @each $name, $value in $map {
        --#{$name}: #{$value};
    }
}

@mixin theme-generator($name, $variables, $gutters) {

    .theme--#{$name} {
        @include map-variables($variables);
        @include gutter-modifiers($gutters);

        @each $name, $value in $variables {
            @include modifier-condition($name, $value, "text", "color");
            @include modifier-condition($name, $value, "bg", "background-color");
            @include modifier-condition($name, $value, "fs", "font-size");
            @include modifier-condition($name, $value, "fw", "font-weight");
            @include modifier-condition($name, $value, "ls", "letter-spacing");
        }

    }

}

@mixin responsive-background($folder, $name, $extension) {
    & {
        background-image: url('#{$folder}/#{$name}-xs.#{$extension}');
        background-position: center center;
        background-size: cover;

        @media (-webkit-min-device-pixel-ratio: 2),
        (min-resolution: 192dpi),
        (min-width: 480px) {
            & {
                background-image: url('#{$folder}/#{$name}-sm.#{$extension}');
            }
        }

        @media (min-width: 960px) {
            & {
                background-image: url('#{$folder}/#{$name}-md.#{$extension}');
            }
        }

        @media (-webkit-min-device-pixel-ratio: 2) and (min-width: 960px),
        (min-resolution: 192dpi) and (min-width: 960px) {
            & {
                background-image: url('#{$folder}/#{$name}-lg.#{$extension}');
            }
        }

        @media (min-width: 1440px) {
            & {
                background-image: url('#{$folder}/#{$name}-lg.#{$extension}');
            }
        }

        @media (-webkit-min-device-pixel-ratio: 2) and (min-width: 1440px),
        (min-resolution: 192dpi) and (min-width: 1440px),
        (min-width: 1920px) {
            & {
                background-image: url('#{$folder}/#{$name}-xl.#{$extension}');
            }
        }

    }
}